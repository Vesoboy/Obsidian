Apache Kafka — это система, которая помогает приложениям быстро и надежно обмениваться сообщениями в реальном времени. Она нужна там, где работают с большими объемами данных.
## Для чего используют?

Связь между частями системы. Например, чтобы микросервисы узнавали об изменениях данных.
Передача потоков данных. Подходит для стримингов видео, обработки событий или аналитики.
Хранение событий. Kafka сохраняет историю событий, чтобы их можно было просматривать и анализировать.](<Kafka Apache — эффективный инструмент для организации работы серверных проектов любого уровня. Благодаря гибкости, масштабируемости и отказоустойчивости используется в различных направлениях IT-индустрии, от сервисов потоковых видео до аналитики [Big Data](https://blog.skillfactory.ru/chto-takoe-bolshie-dannye/).

- **Для связи микросервисов.** Kafka — связующее звено между отдельными функциональными модулями большой системы. Например, с ее помощью можно подписать микросервис на другие компоненты для регулярного получения обновлений.
- **Потоковая передача данных.** Высокая пропускная способность системы позволяет поддерживать непрерывные потоки информации. За счет грамотной маршрутизации «Кафка» не только надежно передает данные, но и позволяет производить с ними различные операции.
- **Ведение журнала событий.** Kafka сохраняет [данные в строго организованную структуру](https://blog.skillfactory.ru/glossary/struktura-dannyh/), в которой всегда можно отследить, когда произошло то или иное событие. Информация хранится в течение заданного промежутка времени, что можно использовать для разгрузки [базы данных](https://blog.skillfactory.ru/glossary/baza-dannyh/) или медленно работающих систем логирования.>)

## Как работает?

1. **Продюсер** отправляет сообщение.
2. **Брокер** (сервер Kafka) сохраняет его в тему (топик).
3. **Потребитель** получает данные из темы, когда они ему нужны.


В упрощенном виде работа Kafka Apache выглядит следующим образом:

- Приложение-продюсер создает сообщение и отправляет его на узел Kafka.
- Брокер сохраняет сообщение в топике, на который подписаны приложения-потребители.
- Потребитель при необходимости делает запрос в топик и получает из него нужные данные.
![[Pasted image 20250124221930.png]]

Сообщения хранятся в Kafka в виде журнала коммитов — записей, размещенных в строгой последовательности. Их можно только добавлять. Удалять или корректировать нельзя. Сообщения хранятся в той последовательности, в которой поступили, их считывание ведется слева направо, а отслеживание — по изменению порядкового номера. Брокеры Kafka не обрабатывают записи — только помещают их в тему на кластере. Хранение может длиться в течение определенного периода или до достижения заданного порога.

Если тема слишком разрастается, для упрощения и ускорения процесса она разделяется на секции. Каждая секция содержит сообщения, сгруппированные по объединяющему признаку. Например, массив пользовательских запросов можно сгруппировать по первой букве имени пользователей. Так приложению-потребителю не придется просматривать весь топик — только нужную тему, что ускоряет процесс обмена сообщениями.

![[Pasted image 20250124222003.png]]

## Преимущества Kafka

- **Надежность:** данные дублируются, чтобы не потеряться при сбоях.
- **Масштабируемость:** можно добавлять новые серверы без остановки системы.
- **Быстрота:** поддерживает одновременно тысячи отправителей и получателей данных.
- **Открытость:** доступен исходный код, который можно настроить под свои задачи.
- **Долговременное хранение:** данные не теряются, даже если их нужно сохранить на месяцы.
- **Интегрируемость**: Благодаря собственному протоколу на базе TCP «Кафка Апач» взаимодействует с другими протоколами передачи данных ([REST](https://blog.skillfactory.ru/glossary/rest-api/), [HTTP](https://blog.skillfactory.ru/glossary/http/), [XMPP](https://blog.skillfactory.ru/glossary/xampp/), STOMP, AMQP, MQTT). Встроенный [фреймворк](https://blog.skillfactory.ru/glossary/framework/) Kafka Connect позволяет Kafka подключаться к базам данных, файловым и облачным хранилищам.


## Где используют?

- Потоковые сервисы (например, YouTube).
- Аналитика (Big Data).
- Связь между приложениями в больших системах.

## Минус:
Лучше всего подходит для работы с большими объемами данных, поэтому в маленьких проектах может быть избыточной.


# [[Практика Kafka]]